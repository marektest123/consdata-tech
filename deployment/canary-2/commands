##################################################################################
#create deployment
oc apply -f canary-2/deployment-v1.yml

#create service
oc apply -f canary-2/service-v1.yml

#expose service
oc apply -f canary-2/route.yml

#create deployment
oc apply -f canary-2/deployment-v2.yml

#create service
oc apply -f canary-2/service-v2.yml

#expose service
oc apply -f canary-2/route-canary.yml

#expose service
oc apply -f canary-2/route-canary-disable-cookies.yml

"haproxy.router.openshift.io/disable_cookies: true"
oc annotate route consdata-tech-deployment haproxy.router.openshift.io/disable_cookie=true
oc annotate route consdata-tech-deployment haproxy.router.openshift.io/balance="roundrobin"
oc set env dc/consdata-tech-deployment ROUTER_BACKEND_PROCESS_ENDPOINTS=shuffle


oc set env dc/router ROUTER_TCP_BALANCE_SCHEME=roundrobin

##################################################################################
oc deploy consdata-tech-deployment --v2

#########
??oc apply -f deployment/imageStream.yml
oc create imagestream consdata-tech-deployment
oc apply -f deployment/build.yml
oc start-build consdata-tech-deployment-s2i --from-dir=target  --follow
oc apply -f deployment/deployment.yml
oc new-app consdata-tech-deployment

oc apply -f deployment/service-blue.yml
oc apply -f deployment/service-green.yml


oc get all --selector app=consdata-tech-deployment -o name
oc delete all --selector app=consdata-tech-deployment

oc patch route consdata-tech-deployment-2 -p '{"spec":{"to":{ "name":"consdata-tech-deployment-service-v1"}}}'

oc tag consdata-tech-deployment:latest consdata-tech/consdata-tech-deployment:v1


$ oc new-app consdata-tech/consdata-tech-deployment:v1 --name=consdata-tech-blue
$ oc new-app consdata-tech/consdata-tech-deployment:v2 --name=consdata-tech-green
oc expose svc/example-green --name=bluegreen-example
oc patch route/bluegreen-example -p '{"spec":{"to":{"name":"example-blue"}}}'

oc new-app consdata-tech/consdata-tech-deployment:v1 --name=consdata-tech-blue-green -l version=v1
