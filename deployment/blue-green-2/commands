#################################################################################
#create deployment blue
oc apply -f deployment/blue-green-2/deployment-blue.yml

#create service
oc apply -f deployment/blue-green-2/service-blue.yml

#expose service (blue/v1)
oc apply -f deployment/blue-green-2/route.yml

#create deployment blue
oc apply -f deployment/blue-green-2/deployment-green.yml

#create service (green/v2)
oc apply -f deployment/blue-green-2/service-green.yml

#expose service (for test - optional)
oc apply -f deployment/blue-green-2/route-test.yml

#switch blue-> green
#a)
oc apply -f deployment/blue-green-2/route-v2.yml
#b)
oc patch route/consdata-tech-deployment -p '{"spec":{"to":{"name":"consdata-tech-deployment-service-v1"}}}'

#clear
oc delete all --selector app=consdata-tech-deployment

#################################################################################
??oc apply -f deployment/imageStream.yml
oc create imagestream consdata-tech-deployment
oc apply -f deployment/build.yml
oc start-build consdata-tech-deployment-s2i --from-dir=target  --follow
oc apply -f deployment/deployment.yml
oc new-app consdata-tech-deployment

oc apply -f deployment/service-blue.yml
oc apply -f deployment/service-green.yml


oc get all --selector app=consdata-tech-deployment -o name
oc delete all --selector app=consdata-tech-deployment

oc patch route consdata-tech-deployment-2 -p '{"spec":{"to":{ "name":"consdata-tech-deployment-service-v1"}}}'

oc tag consdata-tech-deployment:latest consdata-tech/consdata-tech-deployment:v1


$ oc new-app consdata-tech/consdata-tech-deployment:v1 --name=consdata-tech-blue
$ oc new-app consdata-tech/consdata-tech-deployment:v2 --name=consdata-tech-green
oc expose svc/example-green --name=bluegreen-example
oc patch route/bluegreen-example -p '{"spec":{"to":{"name":"example-blue"}}}'

oc new-app consdata-tech/consdata-tech-deployment:v1 --name=consdata-tech-blue-green -l version=v1
